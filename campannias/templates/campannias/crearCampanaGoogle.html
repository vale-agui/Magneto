{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block content %}
<div class="container mt-4">
    <div class="mb-6 text-center">
        <h2 class="text-3xl font-bold text-primary">Configurando campaña para <span class="text-secondary">Google Ads</span></h2>
        <p class="text-gray-600 mt-2">Completa los campos requeridos para tu campaña en Google Ads.</p>
    </div>
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    <div class="card">
        <div class="card-body">
            <form method="post" action="{{ request.path }}" class="bg-white p-8 rounded-lg shadow-lg mt-6">
                {% csrf_token %}
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">{{ form.nombre.label }}</label>
                        {{ form.nombre|add_class:'w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary' }}
                        {{ form.nombre.errors }}
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">{{ form.presupuesto_diario.label }}</label>
                        {{ form.presupuesto_diario|add_class:'w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary' }}
                        {{ form.presupuesto_diario.errors }}
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">{{ form.fecha_inicio.label }}</label>
                        {{ form.fecha_inicio|add_class:'w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary' }}
                        {{ form.fecha_inicio.errors }}
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">{{ form.fecha_fin.label }}</label>
                        {{ form.fecha_fin|add_class:'w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary' }}
                        {{ form.fecha_fin.errors }}
                    </div>
                </div>
                <div class="mt-6">
                    <label class="block text-gray-700 font-medium mb-2">{{ form.tipo_campana.label }}</label>
                    {{ form.tipo_campana|add_class:'w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary' }}
                    {{ form.tipo_campana.errors }}
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">{{ form.red_anuncios.label }}</label>
                    {{ form.red_anuncios|add_class:'w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary' }}
                    {{ form.red_anuncios.errors }}
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">{{ form.palabras_clave.label }}</label>
                    {{ form.palabras_clave|add_class:'w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary' }}
                    {{ form.palabras_clave.errors }}
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">{{ form.puja_maxima.label }}</label>
                    {{ form.puja_maxima|add_class:'w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary' }}
                    {{ form.puja_maxima.errors }}
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">{{ form.edad_min.label }}</label>
                    {{ form.edad_min|add_class:'w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary' }}
                    {{ form.edad_min.errors }}
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">{{ form.edad_max.label }}</label>
                    {{ form.edad_max|add_class:'w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary' }}
                    {{ form.edad_max.errors }}
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">{{ form.genero.label }}</label>
                    {{ form.genero|add_class:'w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary' }}
                    {{ form.genero.errors }}
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">{{ form.ubicacion.label }}</label>
                    {{ form.ubicacion|add_class:'w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary' }}
                    {{ form.ubicacion.errors }}
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">{{ form.intereses.label }}</label>
                    {{ form.intereses|add_class:'w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary' }}
                    {{ form.intereses.errors }}
                </div>
                <div class="flex items-center my-4">
                    <label for="reutilizar_datos" class="mr-2 font-semibold">Guardar datos para la siguiente red</label>
                    <label class="switch">
                      <input type="checkbox" id="reutilizar_datos" name="reutilizar_datos" checked>
                      <span class="slider round"></span>
                    </label>
                </div>
                <button type="submit" class="bg-primary text-white px-6 py-2 rounded hover:bg-secondary transition duration-300">Guardar y continuar</button>
            </form>
        </div>
    </div>
</div>

{% block extra_js %}
<script>
    // Validación de fechas
    document.addEventListener('DOMContentLoaded', function() {
        const fechaInicio = document.getElementById('fecha_inicio');
        const fechaFin = document.getElementById('fecha_fin');
        
        // Establecer fecha mínima como hoy
        const hoy = new Date().toISOString().split('T')[0];
        fechaInicio.min = hoy;
        
        fechaInicio.addEventListener('change', function() {
            fechaFin.min = this.value;
        });
        
        fechaFin.addEventListener('change', function() {
            if (this.value < fechaInicio.value) {
                this.value = fechaInicio.value;
            }
        });
    });
</script>
<style>
.switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 24px;
}
.switch input {display:none;}
.slider {
  position: absolute;
  cursor: pointer;
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: #ccc;
  transition: .4s;
  border-radius: 24px;
}
.slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: .4s;
  border-radius: 50%;
}
input:checked + .slider {
  background-color: #1D4ED8;
}
input:checked + .slider:before {
  transform: translateX(26px);
}
</style>
{% endblock %}

{% endblock %}
